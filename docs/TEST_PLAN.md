# ุฎุทุฉ ุงูุงุฎุชุจุงุฑ ุงูุดุงููุฉ - ุงููุธุงู ุงููุญุงุณุจู

## ุงูุญุงูุฉ: ููุฏ ุงูุชูููุฐ
## ุชุงุฑูุฎ ุงูุฅูุดุงุก: 2026-02-22

---

## ููุฎุต ุงูุฃุฎุทุงุก ุงูููุชุดูุฉ ูุงูููุตูุญุฉ

### ๐ด ุฃุฎุทุงุก ุญุฑุฌุฉ (Critical)

| # | ุงููุตู | ุงููููุน | ุงูุชุฃุซูุฑ | ุงูุญุงูุฉ |
|---|-------|--------|---------|--------|
| 1 | ุชูููุฉ ุงูุจุถุงุนุฉ ุงููุจุงุนุฉ (COGS) ุชุณุชุฎุฏู ุณุนุฑ ุงูุดุฑุงุก ุงูุซุงุจุช ุจุฏูุงู ูู ูุชูุณุท ุณุนุฑ ุงูุดุฑุงุก | `SalesInvoiceForm.tsx` ุฎุท 189 | ุญุณุงุจ ุฃุฑุจุงุญ ุฎุงุทุฆ ูู ูุงุชูุฑุฉ ุงูุจูุน | โ ููุตูุญ |
| 2 | ุญุฑูุฉ ูุฎุฒูู ุงูุจูุน ุชุณุฌู ุณุนุฑ ุงูุจูุน ูุชูููุฉ ูุญุฏุฉ ุจุฏูุงู ูู ุชูููุฉ ุงูุดุฑุงุก | `SalesInvoiceForm.tsx` ุฎุท 222 | ุชูุงุฑูุฑ ุญุฑูุฉ ุงููุฎุฒูู ุบูุฑ ุฏูููุฉ | โ ููุตูุญ |
| 3 | ูุฑุชุฌุน ุงูุจูุน ูุณุชุฎุฏู ุณุนุฑ ุงูุดุฑุงุก ุงูุซุงุจุช ุจุฏูุงู ูู ุงููุชูุณุท ูุญุณุงุจ ุงูุชูููุฉ | `SalesReturnForm.tsx` ุฎุท 170 | ููุฏ ุนูุณ ุงูุชูููุฉ ุบูุฑ ุฏููู | โ ููุตูุญ |
| 4 | ุญุฑูุฉ ูุฎุฒูู ูุฑุชุฌุน ุงูุจูุน ุชุณุฌู ุณุนุฑ ุงูุจูุน ูุชูููุฉ | `SalesReturnForm.tsx` ุฎุท 202 | ุชูุงุฑูุฑ ุงููุฎุฒูู ุบูุฑ ุฏูููุฉ | โ ููุตูุญ |
| 5 | ุชุณููุฉ ุงููุฎุฒูู ุชูุดุฆ ููุฏ ูุญุงุณุจู ุจุญุงูุฉ "approved" ุจูููุง ุงูุชูุงุฑูุฑ ุงููุงููุฉ ุชุจุญุซ ุนู "posted" ููุท | `InventoryAdjustmentForm.tsx` ุฎุท 252 | ูููุฏ ุงูุชุณููุฉ ูุง ุชุธูุฑ ูู ููุฒุงู ุงููุฑุงุฌุนุฉ ููุงุฆูุฉ ุงูุฏุฎู ูุงูููุฒุงููุฉ | โ ููุตูุญ |
| 6 | ุนูุฏ ุฅูุบุงุก ูุงุชูุฑุฉ ูุฑุญููุฉุ ููุณุชุฎุฏู ุฑุตูุฏ ุงูุนููู/ุงูููุฑุฏ ูู ุงูุญุงูุฉ ุงููุญููุฉ (ูุฏ ูููู ูุฏููุงู) | `SalesInvoiceForm.tsx` ู `PurchaseInvoiceForm.tsx` | ุณุจุงู ุจูุงูุงุช ูุฏ ูุคุฏู ูุฑุตูุฏ ุฎุงุทุฆ | โ ููุตูุญ |
| 7 | ุงูุชูุงุฑูุฑ ุงููุงููุฉ (ููุฒุงู ุงููุฑุงุฌุนุฉุ ูุงุฆูุฉ ุงูุฏุฎูุ ุงูููุฒุงููุฉ) ุชุชุฌุงูู ุงููููุฏ ุจุญุงูุฉ "approved" | `TrialBalance.tsx`, `IncomeStatement.tsx`, `BalanceSheet.tsx` | ุจูุงูุงุช ูุงููุฉ ูุงูุตุฉ | โ ููุตูุญ |

---

## ุฎุทุฉ ุงูุงุฎุชุจุงุฑ ุงูุชูุตูููุฉ

### ุงููุณู 1: ููุงุชูุฑ ุงูุจูุน (Sales Invoices)

#### 1.1 ุฅูุดุงุก ูุงุชูุฑุฉ ุจูุน (ูุณูุฏุฉ)
- [ ] ุงุฎุชูุงุฑ ุนููู ูู ุงููุงุฆูุฉ
- [ ] ุฅุถุงูุฉ ุจููุฏ (ููุชุฌุงุช) ูุน ูููุงุช ูุฃุณุนุงุฑ
- [ ] ุงูุชุญูู ูู ุญุณุงุจ ุงูุฅุฌูุงูู ุงููุฑุนู (subtotal = ฮฃ(qty ร price - discount))
- [ ] ุงูุชุญูู ูู ุญุณุงุจ ุงูุถุฑูุจุฉ (tax = subtotal ร taxRate)
- [ ] ุงูุชุญูู ูู ุงูุฅุฌูุงูู ุงูููุงุฆู (grandTotal = subtotal + tax)
- [ ] ุญูุธ ููุณูุฏุฉ ุจูุฌุงุญ
- [ ] ุชุนุฏูู ูุณูุฏุฉ ููุฌูุฏุฉ

#### 1.2 ุชุฑุญูู ูุงุชูุฑุฉ ุจูุน
- [ ] ุงูุชุญูู ูู ูุฌูุฏ ุงูุญุณุงุจุงุช ุงููุทููุจุฉ (1103, 4101, 5101, 1104)
- [ ] ุงูุชุญูู ูู ููุงูุฉ ุงููุฎุฒูู ูุจู ุงูุชุฑุญูู
- [ ] ุฅูุดุงุก ููุฏ ูุญุงุณุจู ูุชูุงุฒู:
  - ูุฏูู: ุญุณุงุจ ุงูุนููุงุก (1103) ุจูููุฉ ุงููุงุชูุฑุฉ
  - ุฏุงุฆู: ุฅูุฑุงุฏุงุช ุงููุจูุนุงุช (4101) ุจูููุฉ ุงููุงุชูุฑุฉ
  - ูุฏูู: ุชูููุฉ ุงูุจุถุงุนุฉ ุงููุจุงุนุฉ (5101) ุจูุชูุณุท ุชูููุฉ ุงูุดุฑุงุก (**ููุณ ุณุนุฑ ุงูุดุฑุงุก ุงูุซุงุจุช**)
  - ุฏุงุฆู: ุงููุฎุฒูู (1104) ุจูุชูุณุท ุชูููุฉ ุงูุดุฑุงุก
- [ ] ุชุญุฏูุซ ูููุฉ ุงููุฎุฒูู (ุฎุตู)
- [ ] ุชุณุฌูู ุญุฑูุฉ ูุฎุฒููุฉ ููุน "sale" ุจุชูููุฉ ุงููุญุฏุฉ ุงูุตุญูุญุฉ (ูุชูุณุท ุณุนุฑ ุงูุดุฑุงุก)
- [ ] ุชุญุฏูุซ ุฑุตูุฏ ุงูุนููู (ุฒูุงุฏุฉ)
- [ ] ุชุบููุฑ ุญุงูุฉ ุงููุงุชูุฑุฉ ุฅูู "posted"

#### 1.3 ุฅูุบุงุก ูุงุชูุฑุฉ ูุฑุญููุฉ
- [ ] ุฅูุดุงุก ููุฏ ุนูุณู ูุชูุงุฒู
- [ ] ุฅุฑุฌุงุน ูููุงุช ุงููุฎุฒูู
- [ ] ุญุฐู ุญุฑูุงุช ุงููุฎุฒูู ุงููุฑุชุจุทุฉ
- [ ] **ุฌูุจ ุฑุตูุฏ ุงูุนููู ุงูุญุงูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช** (ูููุณ ูู ุงูุญุงูุฉ ุงููุญููุฉ)
- [ ] ุชุนุฏูู ุฑุตูุฏ ุงูุนููู (ุฎุตู)
- [ ] ุชุบููุฑ ุญุงูุฉ ุงููุงุชูุฑุฉ ุฅูู "cancelled"

#### 1.4 ุญุฐู ูุณูุฏุฉ
- [ ] ุญุฐู ุจููุฏ ุงููุงุชูุฑุฉ ุฃููุงู
- [ ] ุญุฐู ุงููุงุชูุฑุฉ
- [ ] ุนุฏู ูุฌูุฏ ุฃุซุฑ ุนูู ุงููุฎุฒูู ุฃู ุงูุฃุฑุตุฏุฉ

---

### ุงููุณู 2: ููุงุชูุฑ ุงูุดุฑุงุก (Purchase Invoices)

#### 2.1 ุฅูุดุงุก ูุงุชูุฑุฉ ุดุฑุงุก (ูุณูุฏุฉ)
- [ ] ุงุฎุชูุงุฑ ููุฑุฏ
- [ ] ุฅุถุงูุฉ ุจููุฏ
- [ ] ุญุณุงุจ ุงูุฅุฌูุงููุงุช ุจุดูู ุตุญูุญ
- [ ] ุญูุธ ููุณูุฏุฉ

#### 2.2 ุชุฑุญูู ูุงุชูุฑุฉ ุดุฑุงุก
- [ ] ุฅูุดุงุก ููุฏ ูุญุงุณุจู:
  - ูุฏูู: ุงููุฎุฒูู (1104)
  - ุฏุงุฆู: ุงูููุฑุฏูู (2101)
- [ ] ุชุญุฏูุซ ูููุฉ ุงููุฎุฒูู (ุฅุถุงูุฉ)
- [ ] ุชุณุฌูู ุญุฑูุฉ ูุฎุฒููุฉ ููุน "purchase"
- [ ] ุชุญุฏูุซ ุฑุตูุฏ ุงูููุฑุฏ (ุฒูุงุฏุฉ)

#### 2.3 ุฅูุบุงุก ูุงุชูุฑุฉ ุดุฑุงุก ูุฑุญููุฉ
- [ ] ุฅูุดุงุก ููุฏ ุนูุณู
- [ ] ุฎุตู ูููุงุช ุงููุฎุฒูู
- [ ] **ุฌูุจ ุฑุตูุฏ ุงูููุฑุฏ ุงูุญุงูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช**
- [ ] ุชุนุฏูู ุฑุตูุฏ ุงูููุฑุฏ

---

### ุงููุณู 3: ูุฑุชุฌุนุงุช ุงูุจูุน (Sales Returns)

#### 3.1 ุชุฑุญูู ูุฑุชุฌุน ุจูุน
- [ ] ุฅูุดุงุก ููุฏ ูุญุงุณุจู:
  - ูุฏูู: ุฅูุฑุงุฏุงุช ุงููุจูุนุงุช (4101) ุจูููุฉ ุงููุฑุชุฌุน
  - ุฏุงุฆู: ุงูุนููุงุก (1103) ุจูููุฉ ุงููุฑุชุฌุน
  - ูุฏูู: ุงููุฎุฒูู (1104) ุจูุชูุณุท ุชูููุฉ ุงูุดุฑุงุก (**ูุญุฏุซ**)
  - ุฏุงุฆู: ุชูููุฉ ุงูุจุถุงุนุฉ (5101) ุจูุชูุณุท ุชูููุฉ ุงูุดุฑุงุก (**ูุญุฏุซ**)
- [ ] ุฅุถุงูุฉ ูููุงุช ุงููุฎุฒูู
- [ ] ุชุณุฌูู ุญุฑูุฉ ูุฎุฒููุฉ "sale_return" ุจุชูููุฉ ุงููุญุฏุฉ ุงูุตุญูุญุฉ
- [ ] ุชุนุฏูู ุฑุตูุฏ ุงูุนููู (ุฎุตู)

---

### ุงููุณู 4: ูุฑุชุฌุนุงุช ุงูุดุฑุงุก (Purchase Returns)

#### 4.1 ุชุฑุญูู ูุฑุชุฌุน ุดุฑุงุก
- [ ] ุฅูุดุงุก ููุฏ ูุญุงุณุจู:
  - ูุฏูู: ุงูููุฑุฏูู (2101)
  - ุฏุงุฆู: ุงููุฎุฒูู (1104)
- [ ] ุฎุตู ูููุงุช ุงููุฎุฒูู
- [ ] ุชุณุฌูู ุญุฑูุฉ ูุฎุฒููุฉ "purchase_return"
- [ ] ุชุนุฏูู ุฑุตูุฏ ุงูููุฑุฏ (ุฎุตู)

---

### ุงููุณู 5: ุชุณููุฉ ุงููุฎุฒูู (Inventory Adjustments)

#### 5.1 ุฅูุดุงุก ุชุณููุฉ
- [ ] ุฅุถุงูุฉ ููุชุฌุงุช
- [ ] ุฌูุจ ูุชูุณุท ุณุนุฑ ุงูุดุฑุงุก ุนุจุฑ RPC (ูููุณ ุณุนุฑ ุงูููุชุฌ ุงูุซุงุจุช)
- [ ] ุญุณุงุจ ุงููุฑู ูุงูุชูููุฉ

#### 5.2 ุงุนุชูุงุฏ ุงูุชุณููุฉ
- [ ] ุฅูุดุงุก/ุงูุจุญุซ ุนู ุญุณุงุจุงุช 5201 ู 4201
- [ ] ุฅูุดุงุก ููุฏ ูุญุงุณุจู ุจุญุงูุฉ **"posted"** (ูููุณ "approved") โ
- [ ] ููุฏ ุงูุนุฌุฒ: ูุฏูู ุนุฌุฒ ูุฎุฒูู (5201) + ุฏุงุฆู ูุฎุฒูู (1104)
- [ ] ููุฏ ุงููุงุฆุถ: ูุฏูู ูุฎุฒูู (1104) + ุฏุงุฆู ูุงุฆุถ ูุฎุฒูู (4201)
- [ ] ุชุณุฌูู ุญุฑูุงุช ูุฎุฒููุฉ
- [ ] ุชุญุฏูุซ ูููุงุช ุงูููุชุฌุงุช

---

### ุงููุณู 6: ุงููุฏููุนุงุช (Payments)

#### 6.1 ูุฏููุนุงุช ุงูุนููุงุก
- [ ] ุฅูุดุงุก ุฏูุนุฉ (ูุณูุฏุฉ)
- [ ] ุชุฑุญูู: ุฅูุดุงุก ููุฏ (ูุฏูู ุตูุฏูู/ุจููุ ุฏุงุฆู ุนููุงุก)
- [ ] ุชุนุฏูู ุฑุตูุฏ ุงูุนููู
- [ ] ุฅูุบุงุก: ููุฏ ุนูุณู + ุฅุฑุฌุงุน ุงูุฑุตูุฏ

#### 6.2 ูุฏููุนุงุช ุงูููุฑุฏูู
- [ ] ููุณ ุงุฎุชุจุงุฑุงุช ูุฏููุนุงุช ุงูุนููุงุก (ูุน ุนูุณ ุงูุงุชุฌุงูุงุช)

---

### ุงููุณู 7: ุงูุชูุงุฑูุฑ ุงููุงููุฉ

#### 7.1 ููุฒุงู ุงููุฑุงุฌุนุฉ
- [ ] ุฅุฌูุงูู ุงููุฏูู = ุฅุฌูุงูู ุงูุฏุงุฆู (ุชูุงุฒู)
- [ ] ูุดูู ุฌููุน ุงููููุฏ ุงููุฑุญููุฉ ุจุญุงูุฉ "posted" **ู** "approved"  โ
- [ ] ุงูููุชุฑุฉ ุจุงูุชุงุฑูุฎ ุชุนูู ุจุดูู ุตุญูุญ

#### 7.2 ูุงุฆูุฉ ุงูุฏุฎู
- [ ] ุฅูุฑุงุฏุงุช = ูุฌููุน ุญุฑูุงุช ุญุณุงุจุงุช ุงูุฅูุฑุงุฏุงุช
- [ ] ูุตุฑููุงุช = ูุฌููุน ุญุฑูุงุช ุญุณุงุจุงุช ุงููุตุฑููุงุช
- [ ] ุตุงูู ุงูุฑุจุญ = ุฅูุฑุงุฏุงุช - ูุตุฑููุงุช
- [ ] ูุดูู ุงููููุฏ ุจุญุงูุฉ "posted" ู "approved"  โ

#### 7.3 ุงูููุฒุงููุฉ ุงูุนููููุฉ
- [ ] ุฃุตูู = ุงูุชุฒุงูุงุช + ุญููู ููููุฉ + ุตุงูู ุงูุฑุจุญ
- [ ] ูุดูู ุงููููุฏ ุจุญุงูุฉ "posted" ู "approved"  โ

---

### ุงููุณู 8: ุณูุงูุฉ ุงูุจูุงูุงุช (Data Integrity)

#### 8.1 ุชูุงุฒู ุงููููุฏ ุงููุญุงุณุจูุฉ
- [ ] ูู ููุฏ: total_debit = total_credit
- [ ] ูู ููุฏ: ูุฌููุน ุฃุณุทุฑ ุงููุฏูู = ูุฌููุน ุฃุณุทุฑ ุงูุฏุงุฆู
- [ ] total_debit ุงููุณุฌู = ูุฌููุน ุงูุฃุณุทุฑ ุงููุนูู

#### 8.2 ุชุทุงุจู ุงููุฎุฒูู
- [ ] ูููุฉ ูู ููุชุฌ = ูุฌููุน ุญุฑูุงุช ุงููุฎุฒูู (ุดุฑุงุก + ุงูุชุชุงุญู + ูุฑุชุฌุน ุจูุน + ุชุณููุฉ ูุงุฆุถ - ุจูุน - ูุฑุชุฌุน ุดุฑุงุก - ุชุณููุฉ ุนุฌุฒ)

#### 8.3 ุชุทุงุจู ุฃุฑุตุฏุฉ ุงูุนููุงุก
- [ ] ุฑุตูุฏ ุงูุนููู = ููุงุชูุฑ ูุฑุญููุฉ - ูุฑุชุฌุนุงุช - ูุฏููุนุงุช

#### 8.4 ุชุทุงุจู ุฃุฑุตุฏุฉ ุงูููุฑุฏูู
- [ ] ุฑุตูุฏ ุงูููุฑุฏ = ููุงุชูุฑ ูุฑุญููุฉ - ูุฑุชุฌุนุงุช - ูุฏููุนุงุช

---

### ุงููุณู 9: ุงูุฃูุงู ูุงูุตูุงุญูุงุช

#### 9.1 RLS Policies
- [ ] ุฌููุน ุงูุฌุฏุงูู ุนูููุง RLS ููุนูู
- [ ] ุงููุจูุนุงุช: admin + accountant + sales
- [ ] ุงููุดุชุฑูุงุช: admin + accountant
- [ ] ุงููููุฏ: admin + accountant
- [ ] ุงูุฅุนุฏุงุฏุงุช: admin ููุท ููุชุนุฏูู
- [ ] ุญุฐู: admin ููุท (ูุนุธู ุงูุฌุฏุงูู)

#### 9.2 ุงููุตุงุฏูุฉ
- [ ] ูุฌุจ ุชุณุฌูู ุงูุฏุฎูู ูููุตูู ูุฃู ุตูุญุฉ
- [ ] ุฃูู ูุณุชุฎุฏู ูุญุตู ุนูู ุฏูุฑ admin
- [ ] ุงููุณุชุฎุฏููู ุงูุฌุฏุฏ ูุญุตููู ุนูู ุฏูุฑ sales

---

### ุงููุณู 10: ุงูุจุญุซ ูุงูุนุฑุถ

#### 10.1 ุจุญุซ ุงูููุชุฌุงุช
- [ ] ุงูุจุญุซ ุจุงูุงุณู
- [ ] ุงูุจุญุซ ุจุงููุงุฑูุฉ
- [ ] ุงูุจุญุซ ุจุฑูู ุงูููุฏูู
- [ ] ุงูุจุญุซ ุจุงูููุฏ
- [ ] ุงูุนุฑุถ ุจุชูุณูู: ุงุณู ุงูููุชุฌ - ุงููุงุฑูุฉ - ุฑูู ุงูููุฏูู

---

## ูุชุงุฆุฌ ูุญุต ุงูุจูุงูุงุช ุงูุญูุฉ (2026-02-22)

| ุงููุญุต | ุงููุชูุฌุฉ | ููุงุญุธุงุช |
|-------|---------|---------|
| ุชูุงุฒู ููุฒุงู ุงููุฑุงุฌุนุฉ | โ ูุชูุงุฒู | ูุฏูู 89,500 = ุฏุงุฆู 89,500 |
| ุชูุงุฒู ุงููููุฏ ุงููุฑุฏูุฉ | โ ุณููู | ูุง ููุฌุฏ ูููุฏ ุบูุฑ ูุชูุงุฒูุฉ |
| ุชุทุงุจู ูููุงุช ุงููุฎุฒูู | โ ุณููู | ูุง ููุฌุฏ ูุฑููุงุช |
| ุฑุตูุฏ ุงูุนููุงุก | โ ุณููู | ุงูุนููู C001: ูุณุฌู 14,500 = ูุญุณูุจ 14,500 |
| ุฑุตูุฏ ุงูููุฑุฏูู | โ ุณููู | ุงูููุฑุฏ S001: ูุณุฌู 50,000 = ูุญุณูุจ 50,000 |
| ุญุณุงุจุงุช ูุทููุจุฉ | โ๏ธ ูุงูุต | ุญุณุงุจุงุช 4201 ู 5201 ุณุชููุดุฃ ุชููุงุฆูุงู ุนูุฏ ุฃูู ุชุณููุฉ |
